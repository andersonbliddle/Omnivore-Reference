<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drawing Reference App</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header Controls -->
        <header class="controls-header">
            <div class="app-title">
                <h1>Drawing Reference</h1>
                <div class="tag-filter-section">
                    <div class="filter-row">
                        <label>Filter collections:</label>
                        <div class="text-filter-container">
                            <input type="text" id="text-filter-input" placeholder="Search by name..." maxlength="50">
                            <button id="regex-toggle" class="regex-toggle-btn">Regex</button>
                        </div>
                    </div>
                    <div class="filter-row">
                        <label>Filter by tags:</label>
                        <div class="filter-reminder">Left-click: include • Right-click: exclude</div>
                    </div>
                    <div class="filter-row">
                        <div id="tag-filters" class="tag-filters"></div>
                    </div>
                    <div class="selection-buttons">
                        <div class="selection-group">
                            <button id="select-all-true" class="selection-btn">Select All</button>
                            <button id="deselect-all-true" class="selection-btn">Deselect All</button>
                        </div>
                        <div class="selection-group">
                            <button id="select-filtered" class="selection-btn">Select Filtered</button>
                            <button id="deselect-filtered" class="selection-btn">Deselect Filtered</button>
                        </div>
                        <button id="clear-filters" class="clear-filters-btn">Clear Filters</button>
                    </div>
                </div>
            </div>

            <div class="timer-controls">
                <div class="control-group practice-sets">
                    <label>Practice Sets:</label>
                    <div class="practice-sets-controls">
                        <select id="practice-sets-dropdown" class="practice-sets-dropdown">
                            <option value="">Select Practice Set...</option>
                        </select>
                        <button id="save-practice-set" class="practice-set-btn">Save</button>
                        <button id="update-practice-set" class="practice-set-btn" disabled>Update</button>
                        <button id="delete-practice-set" class="practice-set-btn danger" disabled>Delete</button>
                    </div>
                </div>

                <div class="control-group">
                    <label for="timer-duration">Timer (seconds):</label>
                    <div class="input-with-buttons">
                        <input type="number" id="timer-duration" min="5" max="3600" value="60">
                        <div class="quick-buttons">
                            <button type="button" class="quick-btn" data-timer="30">30s</button>
                            <button type="button" class="quick-btn" data-timer="60">1m</button>
                            <button type="button" class="quick-btn" data-timer="120">2m</button>
                            <button type="button" class="quick-btn" data-timer="300">5m</button>
                            <button type="button" class="quick-btn" data-timer="600">10m</button>
                        </div>
                    </div>
                </div>
                
                <div class="control-group">
                    <label for="session-length">Images per session:</label>
                    <div class="input-with-buttons">
                        <input type="number" id="session-length" min="1" max="1000" value="10">
                        <div class="quick-buttons">
                            <button type="button" class="quick-btn" data-session="5">5</button>
                            <button type="button" class="quick-btn" data-session="10">10</button>
                            <button type="button" class="quick-btn" data-session="20">20</button>
                            <button type="button" class="quick-btn" data-session="50">50</button>
                            <button type="button" class="quick-btn" data-session="100">100</button>
                        </div>
                    </div>
                </div>
                
                <div class="control-group">
                    <button id="start-session" class="primary-btn">Start Session</button>
                    <button id="pause-session" class="secondary-btn" disabled>Pause</button>
                    <button id="stop-session" class="secondary-btn" disabled>Stop</button>
                    <button id="fullscreen-btn" class="secondary-btn">Fullscreen</button>
                </div>
            </div>
        </header>

        <!-- Collections Management -->
        <section class="collections-section">
            <div class="collections-header">
                <h2>Image Collections</h2>
                <div class="header-controls">
                    <div class="icon-size-controls">
                        <label>Icon Size:</label>
                        <div class="icon-size-buttons">
                            <button type="button" class="icon-size-btn active" data-size="small">S</button>
                            <button type="button" class="icon-size-btn" data-size="medium">M</button>
                            <button type="button" class="icon-size-btn" data-size="large">L</button>
                        </div>
                    </div>
                    <div class="header-buttons">
                        <button id="add-collection" class="add-btn">Add Directory</button>
                    </div>
                </div>
            </div>
            
            <div class="collections-list" id="collections-list">
                <div class="no-collections">
                    <p>No image collections added yet. Click "Add Directory" to get started.</p>
                </div>
            </div>
        </section>

        <!-- Main Drawing Area -->
        <main class="drawing-area">
            <!-- Session Controls Overlay -->
            <div class="session-overlay" id="session-overlay" style="display: none;">
                <div class="session-countdown">
                    <span id="countdown-timer">--:--</span>
                </div>
                <div class="session-controls">
                    <button id="prev-image" class="session-btn">← Previous</button>
                    <button id="pause-resume" class="session-btn primary">Pause</button>
                    <button id="next-image" class="session-btn">Next →</button>
                    <button id="end-session" class="session-btn danger">End Session</button>
                </div>
                <div class="session-progress">
                    <span id="session-counter">1 / 10</span>
                </div>
            </div>
            
            <div class="image-container" id="image-container">
            
        </main>
        
        <!-- Floating Action Buttons -->
        <div class="floating-buttons">
            <div class="floating-left">
                <button id="add-tag-to-selected" class="floating-tag-btn" style="display: none;">Add Tag</button>
                <button id="remove-tag-from-selected" class="floating-tag-btn" style="display: none;">Remove Tag</button>
            </div>
            <div class="floating-right">
                <button id="reorder-collections" class="floating-reorder-btn">Reorder</button>
                <button id="delete-selected" class="floating-delete-btn" style="display: none;">Delete Selected Collections</button>
            </div>
        </div>

        <!-- Tag Context Menu -->
        <div id="tag-context-menu" class="tag-context-menu" style="display: none;">
            <div class="context-menu-header">Manage Tags</div>
            <div class="tag-list-container">
                <div class="current-tags">
                    <div class="tag-section-title">Tags (click to toggle):</div>
                    <div id="current-tags-list" class="tags-display"></div>
                </div>
                <div class="available-tags" style="display: none;">
                    <div class="tag-section-title">Available Tags:</div>
                    <div id="available-tags-list" class="tags-list"></div>
                </div>
                <div class="new-tag-input">
                    <input type="text" id="new-tag-input" placeholder="Add new tag..." maxlength="20">
                    <button id="add-tag-btn" class="tag-add-btn">Add</button>
                </div>
            </div>
            <div class="context-menu-actions">
                <button id="close-tag-menu" class="context-close-btn">Close</button>
            </div>
        </div>

        <!-- Mass Tag Add Dialog -->
        <div id="mass-tag-add-dialog" class="mass-tag-dialog" style="display: none;">
            <div class="dialog-content">
                <div class="dialog-header">Add Tag to Selected Collections</div>
                <div class="dialog-body">
                    <div class="tag-input-section">
                        <input type="text" id="mass-add-tag-input" placeholder="Enter tag name..." maxlength="20">
                        <button id="create-and-add-tag" class="dialog-btn primary">Create & Add</button>
                    </div>
                    <div class="existing-tags-section">
                        <div class="section-title">Or select from existing tags:</div>
                        <div id="mass-add-existing-tags" class="existing-tags-list"></div>
                    </div>
                </div>
                <div class="dialog-actions">
                    <button id="cancel-mass-add" class="dialog-btn secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Mass Tag Remove Dialog -->
        <div id="mass-tag-remove-dialog" class="mass-tag-dialog" style="display: none;">
            <div class="dialog-content">
                <div class="dialog-header">Remove Tag from Selected Collections</div>
                <div class="dialog-body">
                    <div class="section-title">Select tags to remove:</div>
                    <div id="mass-remove-tags-list" class="existing-tags-list"></div>
                </div>
                <div class="dialog-actions">
                    <button id="cancel-mass-remove" class="dialog-btn secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Save Practice Set Dialog -->
        <div id="save-practice-set-dialog" class="mass-tag-dialog" style="display: none;">
            <div class="dialog-content">
                <div class="dialog-header">Save Practice Set</div>
                <div class="dialog-body">
                    <div class="practice-set-info">
                        <p id="practice-set-selected-count">0 collections selected</p>
                    </div>
                    <div class="practice-set-input-section">
                        <input type="text" id="practice-set-name-input" placeholder="Enter practice set name..." maxlength="30">
                        <button id="confirm-save-practice-set" class="dialog-btn primary">Save Practice Set</button>
                    </div>
                </div>
                <div class="dialog-actions">
                    <button id="cancel-save-practice-set" class="dialog-btn secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Tutorial Modal -->
        <div id="tutorial-modal" class="tutorial-modal" style="display: none;">
            <div class="tutorial-overlay-bg"></div>
            <div class="tutorial-highlight-area"></div>
            <div class="tutorial-content">
                <div class="tutorial-header">
                    <h3 id="tutorial-title">Welcome to Drawing Reference App</h3>
                    <div class="tutorial-progress">
                        <span id="tutorial-step-counter">1 / 5</span>
                    </div>
                </div>
                <div class="tutorial-body">
                    <div id="tutorial-text" class="tutorial-text">
                        Welcome! This tutorial will guide you through the main features of the app.
                    </div>
                </div>
                <div class="tutorial-actions">
                    <button id="tutorial-skip" class="tutorial-btn secondary">Skip Tutorial</button>
                    <div class="tutorial-navigation">
                        <button id="tutorial-prev" class="tutorial-btn secondary" disabled>Previous</button>
                        <button id="tutorial-next" class="tutorial-btn primary">Next</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>